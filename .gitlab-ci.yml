stages:
        - test
        - build

test_tox:
        stage: test
        image: fedora:30
        script:
                - dnf install -y python3 python35 python36 python3-tox
                - pip3 install poetry
                - tox
# test_py35:
#         stage: test
#         image: python:3.5-alpine
#         script:
#                 - pip install poetry
#                 - poetry install -vvv
#                 - poetry run pytest --cov=apiminer/
# 
# test_py36:
#         stage: test
#         image: python:3.6-alpine
#         script:
#                 - pip install poetry
#                 - poetry install -vvv
#                 - poetry run pytest --cov=apiminer/
# 
# test_py37:
#         stage: test
#         image: python:3.7-alpine
#         script:
#                 - pip install poetry
#                 - poetry install -vvv
#                 - poetry run pytest --cov=apiminer/

build_linux:
        stage: build
        image: python:3-alpine
        script:
                - pip install poetry
                - poetry install -vvv
                - poetry build

build_win:
        stage: build
        image: python:3-windowsservercore
        script:
                - pip install poetry
                - poetry install -vvv
                - poetry build
